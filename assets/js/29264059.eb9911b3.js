"use strict";(self.webpackChunkplatform_docs=self.webpackChunkplatform_docs||[]).push([[2440],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return p}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),m=c(n),p=o,h=m["".concat(s,".").concat(p)]||m[p]||d[p]||a;return n?r.createElement(h,i(i({ref:t},u),{},{components:n})):r.createElement(h,i({ref:t},u))}));function p(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},7769:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return c},default:function(){return d}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],l={slug:"v0.1-item-service",title:"v0.1 release! Platform now includes Item Service",author:"Olivier Scherrer",author_title:"CTO @ JWA Lab",author_url:"https://github.com/podefr",author_image_url:"https://avatars.githubusercontent.com/u/219256?s=400",tags:["JWA","Item Service","Platform","documentation","blockchain","API","services","v0.1","tezos","work queue"]},s={permalink:"/platform-docs/blog/v0.1-item-service",editUrl:"https://github.com/jwa-lab/platform-docs/blog/blog/2021-10-12-item-service.md",source:"@site/blog/2021-10-12-item-service.md",title:"v0.1 release! Platform now includes Item Service",description:"Today we're excited to announce a new release of the Community Platform!",date:"2021-10-12T00:00:00.000Z",formattedDate:"October 12, 2021",tags:[{label:"JWA",permalink:"/platform-docs/blog/tags/jwa"},{label:"Item Service",permalink:"/platform-docs/blog/tags/item-service"},{label:"Platform",permalink:"/platform-docs/blog/tags/platform"},{label:"documentation",permalink:"/platform-docs/blog/tags/documentation"},{label:"blockchain",permalink:"/platform-docs/blog/tags/blockchain"},{label:"API",permalink:"/platform-docs/blog/tags/api"},{label:"services",permalink:"/platform-docs/blog/tags/services"},{label:"v0.1",permalink:"/platform-docs/blog/tags/v-0-1"},{label:"tezos",permalink:"/platform-docs/blog/tags/tezos"},{label:"work queue",permalink:"/platform-docs/blog/tags/work-queue"}],readingTime:3.62,truncated:!1,nextItem:{title:"Welcome",permalink:"/platform-docs/blog/welcome"}},c=[{value:"Developer Experience",id:"developer-experience",children:[]},{value:"Performance",id:"performance",children:[]},{value:"Introducing the <code>Item Service</code> and <code>Tezos Work Queue</code>",id:"introducing-the-item-service-and-tezos-work-queue",children:[{value:"A better API",id:"a-better-api",children:[]},{value:"Better performance",id:"better-performance",children:[]},{value:"Reduced cost",id:"reduced-cost",children:[]}]},{value:"Next features",id:"next-features",children:[]},{value:"Try it today",id:"try-it-today",children:[]}],u={toc:c};function d(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Today we're excited to announce a new release of the Community Platform!"),(0,a.kt)("p",null,"The team has been incredibly busy over the last few months to address the great feedback we've received on the first version of the Platform's services."),(0,a.kt)("h2",{id:"developer-experience"},"Developer Experience"),(0,a.kt)("p",null,'The biggest feedback we\'ve received was around the developer experience. While the platform itself is easy to use, the "tokenization dance"\nthat the combination of the ',(0,a.kt)("inlineCode",{parentName:"p"},"Item Store")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"Tokenization Service")," APIs required was pretty awful:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"We had to manage our items in ",(0,a.kt)("inlineCode",{parentName:"li"},"Item Store")," and then instruct the ",(0,a.kt)("inlineCode",{parentName:"li"},"Tokenization Service")," to sync up with ",(0,a.kt)("inlineCode",{parentName:"li"},"Item Store")," to update the blockchain"),(0,a.kt)("li",{parentName:"ul"},"While the calls to ",(0,a.kt)("inlineCode",{parentName:"li"},"Item store")," were fast, the calls to ",(0,a.kt)("inlineCode",{parentName:"li"},"Tokenization Service")," were synchronous with inherent blockchain delays built in. This meant an API that was difficult to use\nand API calls that could easily fail with unstable network or just timeout."),(0,a.kt)("li",{parentName:"ul"},'Creating item instances was even more complex as we had to introduce the notion of "users" to group instances by players. This was not a feature for our users\nbut rather a technical requirement introduced by our design.'),(0,a.kt)("li",{parentName:"ul"},"And then, some ids were numbers, some were unique ids, the whole thing was confusing.")),(0,a.kt)("h2",{id:"performance"},"Performance"),(0,a.kt)("p",null,"On top of the cumbersome API, we also had a brittle tokenization logic which would prevent a user from requesting a new tokenization while one was still ongoing."),(0,a.kt)("p",null,"The tokenization calls were synchronous and could take at least one block time (30s to 1 minute). When tokenizing aggressively, that could mean a synchronous request taking minutes.\nOn top of that, we couldn't start a new tokenization if the previous one didn't complete, risking 2 simultaneous smart contract calls which result in a counter issue in Tezos."),(0,a.kt)("h2",{id:"introducing-the-item-service-and-tezos-work-queue"},"Introducing the ",(0,a.kt)("inlineCode",{parentName:"h2"},"Item Service")," and ",(0,a.kt)("inlineCode",{parentName:"h2"},"Tezos Work Queue")),(0,a.kt)("p",null,"We've addressed this feedback by making a huge overhaul of our services. While the platform and its architecture haven't changed, we refactored our Tezos smart contracts and built a new integrated\nAPI in a new service called ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service"),' which automates the "tokenization dance". We\'ve also introduced the ',(0,a.kt)("inlineCode",{parentName:"p"},"Tezos Work Queue")," which asynchronously executes operations on the Tezos blockchain while\ngiving the control back to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service")," to treat new requests."),(0,a.kt)("h3",{id:"a-better-api"},"A better API"),(0,a.kt)("p",null,"The \"tokenization dance\" is now completely abstracted away from the user. We only deal with a blazing fast API to manage our items and item instances, and the Item Service executes the tokenization in the background, asynchronously.\nThis allowed us to simply remove the tokenization service from the platform. The Tezos Work Queue has been added but can't be used directly, it operates in the background to treat the Item Service's tokenization requests and orchestrate smart contracts calls.\nA refactoring of our smart contracts also allowed us to simplify managing item instances as we dropped the notion of inventories (collection of item instances for a user) and the associated APIs."),(0,a.kt)("h3",{id:"better-performance"},"Better performance"),(0,a.kt)("p",null,"The Tezos Work Queue is an incredible tool that receives tokenization requests at any rate necessary and then immediately sends an ACK back to the ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service")," so the ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service")," can keep treating new requests.\nAt its own pace, the Tezos Work Queue will now interface with the blockchain to unqueue operations, execute them on the blockchain and wait for confirmation. "),(0,a.kt)("p",null,"This change allowed for a blazing fast ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service")," API as the heavy lifting is done in the background, and the ",(0,a.kt)("inlineCode",{parentName:"p"},"Item Service")," is free to treat client requests."),(0,a.kt)("h3",{id:"reduced-cost"},"Reduced cost"),(0,a.kt)("p",null,"The smart contracts refactoring involved removing the notion of inventories and collocating items and item instances together. This means that there's no need to deploy and keep track of additional inventories. A nice benefit is that we've drastically reduced\nthe cost of assigning an item to a first-time user, from ",(0,a.kt)("inlineCode",{parentName:"p"},"~0.4tz")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"~0.02tz"),", and the instance transfer cost from ",(0,a.kt)("inlineCode",{parentName:"p"},"0.02tz")," to ",(0,a.kt)("inlineCode",{parentName:"p"},"0.0007tz"),"!"),(0,a.kt)("h2",{id:"next-features"},"Next features"),(0,a.kt)("p",null,"Our Tezos Work Queue brings amazing improvements to the User Experience, but it also allows us to start batching operations! Batching will bring our platform's performance to the next level, allowing us to execute dozens or hundreds of operations in a single batch."),(0,a.kt)("h2",{id:"try-it-today"},"Try it today"),(0,a.kt)("p",null,"We can't wait to get your feedback on this new release. ",(0,a.kt)("a",{parentName:"p",href:"/"},"Please head out to our tutorial to get started!"),", or reach out on our ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jwa-lab/community-platform/issues"},"GitHub")," for questions and feedback."))}d.isMDXComponent=!0}}]);